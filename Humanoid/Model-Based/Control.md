

经典控制利用反馈线性化或计算力矩法，利用已知的刚体动力学模型抵消非线性项（重力、科氏力），利用几何运动学计算末端刚体运动与驱动关节的关系，使系统对上层呈现为线性。未来的架构应该将已知的物理方程作为归纳偏置嵌入到网络中。


## 状态估计器

### 输入

| 输入信息   | 具体内容                                 | 用途                                 |
| ------ | ------------------------------------ | ---------------------------------- |
| IMU    | 线加速度、角速度                             | 提供连续运动的趋势；机身的运动                    |
| 关节编码器  | 关节角、关节角速度                            | 几何一致性；正向运动学、足端速度/位置构建、接触约束构建       |
| 足底接触信息 | 二值接触 {0,1}、足底接触力 $\mathbf{f}_{foot}$ | 绝对参考；接触点固定约束、ZUPT（零速度更新）、抑制 IMU 漂移 |
|        |                                      |                                    |





IMU：线加速度、角速度
关节编码器：关节角、关节角速度
足底接触信息：

### 输出



# 控制李雅普诺夫函数（CLF）

在人形机器人控制中，**控制李雅普诺夫函数（Control Lyapunov Function, CLF）** 是将“稳定性理论”转化为“控制算法”的关键桥梁。

李雅普诺夫函数是用来**判断**一个系统是否稳定，那么 CLF 就是用来**设计**一个让系统变稳定的控制器。


## 李雅普诺夫
如果一个系统的“能量”在不断减少，那么系统最终一定会停止在某个平衡点上（就像一个球在碗里滚，最终停在碗底）。

为了证明系统稳定，我们需要构造一个标量函数 $V(x)$（通常称为**李雅普诺夫候选函数**），它必须满足：
1. **正定性**：$V(x) > 0$（除了平衡点 $x=0$ 处为 $0$）。这代表系统的“广义能量”。
2. **导数负定性**：$\dot{V}(x) < 0$。这代表系统的能量随时间在不断消耗。

如果能找到这样一个函数，系统就是**渐近稳定**的。

李雅普诺夫函数通常写成二次型形式 $V(x) = x^\top \mathbf{P} x$。为了保证能量 $V(x)$ 永远为正，**矩阵 $\mathbf{P}$ 必须是正定矩阵**。

## CLF

对于一个受控系统 $\dot{x} = f(x) + g(x)u$（其中 $u$ 是你的控制输入，比如电机力矩），如果存在一个函数 $V(x)$，使得对于每一个状态 $x$，我们都能找到一个控制律 $u$，满足：
$$\inf_{u} \{ \dot{V}(x, u) \} < 0$$
那么这个 $V(x)$ 就被称为 **CLF**。
**直观理解：** 这意味着在任何危险的时刻，你手里都至少有一种“牌”（控制指令），能让系统的能量降下来。