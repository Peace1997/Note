

# 论文 1 - 状态估计器
**Concurrent Training of a Control Policy and a State Estimator for Dynamic and Robust Legged Locomotion —— 为动态和稳健的腿部运动同时训练控制策略和状态估计器**

#sim2real #ppo


***主要思想：***
该框架包含两个网络结构：策略网络结构和状态估计网络。其中，策略网络结构输出关节期望位置；状态估计网络用于输出机器人状态信息。
该在强化学习 AC 框架基础上，增加**历史状态信息**，通过一个状态估计网络对机器人的线速度、脚的高度和接触概率进行估计。并将状态估计信息输入到控制策略产生最后的动作，该状态估计器与控制策略同时进行训练。

![[Pasted image 20240419171922.png]]

***论文亮点***
由于本体的状态信息对机器人运动控制是计较重要了，为实现 sim2real，增加历史状态信息和状态估计网络，训练完成后保存状态估计网络模型和策略网络模型。经验证，该方法可以有效实现 sim2real

***其他技巧***
- 动态随机化：动态随机化对于 sim 2 real 也是有很大帮助的，其中包括
	- Observation noise：观测噪声是在训练过程中添加的。例如，在真实机器人上，关节速度的测量来自于关节位置的数值微分，会导致关节速度观测到误差
	- Motor frictions:
	- PD controller gains:
	- Foot positions and collision geometry
	- Ground friction
	- 
















**Intelligent proximal-policy-optimization-based decision-making system for humanoid robots —— 基于近端策略优化的仿人机器人智能决策系统**
(Advanced Engineering Informatics CCF B)

#ppo

发表时间：2023

主要内容：

针对仿人机器人自主运动决策和控制问题，提出了一种基于 PPO 的分层决策系统架构，上层负责高层次运动任务和步态规划，下层负责详细的关节级运动控制。
- 在上层，首先由**任务规划模块**，根据任务目标 (如移动目的地)规划出大致的运动序列；然后再由 **PPO 算法**基于上层状态空间（如目标位置、步态等），输出合适的**运动原语**（预先定义了一组基本的运动原语 (motion primitives), 如向前迈步、转弯、俯身等基本动作。）序列作为下层输入。
- 在下层，首先由 **运动原语执行模块**，根据上层选择的原语, 生成对应的关节目标轨迹；再由**约束解算器**，针对机器人的动力学约束和关节极限, 对轨迹进行优化调整, 输出满足约束的最终关节轨迹；然后利用**PPO 策略网络**，基于下层状态空间 (当前关节角度、速度等), 直接输出每个关节的力矩控制命令；最后通过**随机采样模块**， 在执行过程中, 通过蒙特卡罗随机采样预测未来可能的状态, 提高决策的鲁棒性。

> 蒙特卡罗随机采样在本文的应用：
> - 对于价值估计：再每一步决策时,系统并不是只考虑当前状态的确定性预测，而是通过蒙特卡洛采样 N 种可能的下一状态，即对于当前状态 s 和动作 a,下一状态 s'遵循某个条件概率分布 P(s'|s,a)，然后将这 N 个采样状态的价值进行平均,作为当前动作 a 在状态 s 下的近似价值估计值。
> - 对于动作输出： 不是单纯地选择当前动作价值最大的动作, 而是从可选动作集合中, 选择具有最优预期价值的动作, 其中预期价值就是通过蒙特卡罗采样估计得到



#sim2real  