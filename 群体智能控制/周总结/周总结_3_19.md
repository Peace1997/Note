- [ ] 在 Github 上，对 2D、3D 物理仿真平台进行调研汇总、复现
- [ ] 选用 Box2D 作为现阶段物理仿真环境，进行协同制导的实验研究。并在Docker中搭建好相应的环境。

# 一、 总结

上一周主要对相关论文采用的环境进行调研。这周的话，在 Github ，针对导弹、飞行器、火箭等相关仿真环境进行调研，并下载相关的代码进行复现。目前 2D 物理仿真平台有限，主要包括 Box2D 和 Unity3D。
- Box2D 适用于相对简单的 2D 物理仿真场景，而 Unity3D 适用于更复杂的 2D 和 3D 游戏和仿真场景。
- Box2D是一种在 OpenAI Gym 平台上开发模拟环境，方便与强化学习不同算法进行交互计算，而Unity3D内置了相关的强化学习算法，但算法封装比较复杂。Unity3D官方并没有提供直接支持Python的功能，需要有一些第三方插件可将Python集成到Unity3D中。


Box2D与Unity3D相比，物理环境相对简单，基于Gym开发，对Python支持较好，具有较好的扩展性，可以使用不同的强化学习进行交互。因此，**采用Box2D作为现阶段物理仿真平台**。
通过在 Box2D 中创建一个刚体，可以为导弹指定形状和质量，并在仿真中模拟导弹的运动。通过添加力和扭矩，可以模拟各种导弹的控制方法。

Box2D 环境中的 lunarlander 项目和我们的项目是有相似的，因此**我基于Box2D官方的 lunarlander 项目以及Github上的两个火箭着陆（rocket-lander）项目为baseline，修改仿真环境，设计算法**。

## 实验进度：
目前，在 Docker 进行环境的搭建，核心依赖包：
- python:3.7.0
- gym:0.21.0
- pygame: 2.3.0
- pyglet: 1.5.0
- numpy: 1.21.6
- torch：1.13.1
- tensorflow: 1.15.0

以下是运行的两个火箭着陆
![[box2d5.png|500]]

![[box2d4.png|500]]


# 二、仿真环境调研

下面是对 2D 环境和 3D 环境调研的相关笔记，3D 仿真环境作为日后要迁移的环境，进行简单的总结。

## 2.1 2D物理仿真环境调研

### Box2D

Box2D是一个开源的物理引擎，用于模拟2D刚体物理效果。它被广泛应用于游戏和仿真领域，支持各种形状的物体和多种约束，例如距离、摩擦、弹性等。Box2D使用C++编写，但也有许多其他语言的移植版，例如Python、Java和JavaScript等



#### 相关案例

Box2D 环境中的 lunarlander 项目和我们的项目是有相似的，通过控制飞行器的三个喷射器，使飞行器可以平稳落地。
https://www.gymlibrary.dev/environments/box2d/lunar_lander/
![[box2d3.png|300]]


目前 Github 上与飞行器相关的项目也主要以火箭落地为主
1. https://github.com/EmbersArc/gym-rocketlander
![[box2d1.png|200]]
2. https://github.com/arex18/rocket-lander
![[box2d2.png|300]]

> 目前也是以这两个项目为基准设计我们的实验

### Unity3D

Unity3D 采用了一款名为 PhysX 的物理引擎，被 NVIDIA 收购并继续开发和维护，可以作为2D和3D的仿真。它是一款用于实现真实物理现象的高性能物理引擎。Unity3D 中的物理引擎模拟了真实世界中的物理规律，如重力、摩擦力、弹力等，并且支持碰撞检测和物理材质。开发者可以在 Unity3D 中通过添加刚体组件、碰撞器组件、关节组件等来使用物理引擎。。PhysX 引擎具有良好的跨平台性能和可扩展性，并且支持 GPU 加速和多线程处理，可以实现更高效的物理计算。目前关于飞行器2D、3D的仿真也是比较多。因为内置RL算法， 可直接调用训练，因为对算法进行封装，不易于阅读和修改。
- https://github.com/reversegremlin/RocketBoost
![[unity1.png|500]]
- https://github.com/vilbeyli/TrajectoryTutorial
![[unity2.png|500]]



### 2. 3D物理仿真环境调研

#### Gazebo
Gazebo是一款功能强大的三维物理仿真平台，具备强大的物理引擎、高质量的图形渲染、方便的编程与图形接口，最重要的是其开源免费的特性。Gazebo支持多种高性能物理引擎，例如ODE，Bullet，Simbody和DART。Gazebo的功能包括：动力学仿真、传感器仿真、三维环境仿真、训练AI系统，同时支持多种机器人模型。可以利用 digital elevation model (DEM), SDF meshes, and OpenStreetMap (OSM) 导入各种环境，也可以利用URDF（Universal Robot Description Format）文件导入机器人模型。Gazebo与ROS紧密集成，数据通信时，需要经由ROS这个中介去发布订阅话题，通信效率相对较低。


关于飞行器在 Gazebo下的仿真相对较少。以下是我复现的关于 Gazebo 的仿真，该项目只提供了相应的urdf文件，没有进行任何仿真控制实验。
https://github.com/xingsheng0112/gazebo_rocket.git
![[ros1.png|300]]

![[ros2.png|300]]

#### JSBSim
JSBSim 是一款用于飞行动力学建模和仿真的开源软件包。它采用 C++语言编写，可在 Linux、Windows 和 Mac 等多个操作系统上运行，并可用于模拟各种类型的飞行器，包括固定翼飞机、直升机、滑翔机、无人机等。JSBSim 的模型建立基于飞行器的物理学模型，它包括了飞行器的动力学、控制、航空气动力学、发动机模型、舵面模型等多个方面，可用于模拟飞行器在不同飞行状态下的行为。JSBSim 提供了多种 API 接口，开发者可以使用 C++、Python、Matlab、Java 等语言进行调用和集成，也可以使用 JSBSim 提供的 XML 格式输入文件来进行仿真，而无需编写代码。
https://github.com/JSBSim-Team/jsbsim

目前 Github 上也有相关的项目通过 Gym 与 JSBSim 相结合，利用 RL 对飞行器进行控制。
- https://github.com/Gor-Ren/gym-jsbsim
- https://github.com/mrwangyou/DBRL
- https://github.com/rtatze/JSBSim_gym_wrapper
- https://github.com/zgoddard3/jsbsim-gym
![[jsbsim.png|500]]
#### RocketPy

RocketPy是一个用Python编写的开源火箭设计和仿真工具，它可以模拟火箭发射、轨道飞行、再入等过程。RocketPy支持多种燃料类型、多段火箭设计、多个发动机设计和不同的环境条件。RocketPy包含了许多不同的模块，可以对火箭的各种属性进行分析和设计。RocketPy还提供了一组工具，用于处理火箭的数据和可视化结果。RocketPy的代码是开源的，同时也有社区可以提供支持和建议。也提供了相应的开发者手册：
https://docs.rocketpy.org/en/latest/user/index.html
https://github.com/RocketPy-Team/RocketPy

#### XPlane
X-Plane 是一款全球流行的计算机模拟飞行软件，由 Laminar Research 开发。它最初是在 1993 年推出的，现在已经发展成为业界最先进的飞行模拟器之一。X-Plane 使用实时计算的物理模型，可以模拟多种气象条件、飞行状态和机型。它的飞行动力学模型以及天气引擎可以模拟真实世界的气象现象，包括风、雨、雪、云、雷暴和飞机的结冰等。X-Plane支持Windows、Mac和Linux操作系统，并可用于个人或商业用途。用户可以通过插件来增强X-Plane的功能，例如增加更多的飞机、机场和天气条件等。
目前也有一些开发者实现了 Gym 与 XPlane 的结合，可以通过 RL 算法完成对飞行器的控制：
https://github.com/adderbyte/GYM_XPLANE_ML.git


**下周任务：**
- [ ] 基于BOX2D平台，搭建实验仿真环境