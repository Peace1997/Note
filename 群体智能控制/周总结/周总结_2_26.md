
本周主要的任务是：
- [ ] 导弹飞行力学基础知识学习：坐标系间的关系及其转换
- [ ] 对一致性问题的基础调研总结
- [ ] 对两种制导结构进行学习

![[学习计划2_26.png|500]]

## 1. 坐标系间的关系及其转换

各坐标系一般情况下并不重合（弹道坐标系和速度坐标系的 x 轴除外），各坐标系之间，存在一定的家教，这些角度有各自的物理意义，表达了各坐标系之间的关系，被称为欧拉角。
> 欧拉角；用于描述物体在三维空间中旋转的方法

为了方便描述飞行器在空间的运动规律，需要选择合适的坐标系。

***为什么需要坐标系间的转换：***
作用在导弹上的力和力矩及其相应的运动参数是在不同坐标系中定义的。例如：空气动力定义在速度坐标系中、推力和空气动力矩用弹体坐标系来定义，重力和射程则用地面坐标系来定义。

在建立导弹运动标量方程式，需要将定义在不同坐标系的参量投影到同一坐标系上。
> 当选择弹道坐标系建立飞行器质心运动的动力学方程时，就需要将作用在飞行器上的空气动力、推力和重力分别投影到弹道坐标系上。
> 如果选择弹体坐标系来描述飞行器绕质心的转动，则需要将作用在飞行器上的力投影到弹体坐标系，进而建立沿弹体坐标系各坐标轴的力矩方程。


***常用的转换方法***
1. **连续旋转法**：通过坐标系的连续旋转变换，建立两个坐标系之间的关系。利用连续旋转法可以更加方便的理解坐标系之间形成的角度。
2. **直接投影法**：将某个矢量在两个不同的坐标系里投影，然后利用投影相等的原理，建立两个坐标系之间的转换关系
3. **四元数法**：利用四元数和矢量之间的映射关系，基于四元数代数法，建立四元数坐标变换公式，确定矢量在两个不同坐标系之间的转换关系。

### 初等旋转矩阵
设某矢量在坐标系 $A 、 B$ 中的三轴投影分别为:
$$
\left[\begin{array}{lll}
X_A, & Y_A, & Z_A
\end{array}\right]^{\mathrm{T}} \text { 和 }\left[X_B, \quad Y_B, Z_B\right]^{\mathrm{T}}
$$

若坐标系A绕其 $x$ 轴转过角度$\delta$后与坐标系B重合，
$$\quad\left[\begin{array}{c}X_B \\ Y_B \\ Z_B\end{array}\right]=\left[\begin{array}{ccc}1 & 0 & 0 \\ 0 & \cos \delta & \sin \delta \\ 0 & -\sin \delta & \cos \delta\end{array}\right]\left[\begin{array}{c}X_A \\ Y_A \\ Z_A\end{array}\right]$$
若坐标系A绕其 $y$ 轴转过角度$\delta$后与坐标系B重合，
$$\left[\begin{array}{c}X_B \\ Y_B \\ Z_B\end{array}\right]=\left[\begin{array}{ccc}\cos \delta & 0 & -\sin \delta \\ 0 & 1 & 0 \\ \sin \delta & 0 & \cos \delta\end{array}\right]\left[\begin{array}{c}X_A \\ Y_A \\ Z_A\end{array}\right]$$
若坐标系A绕其 $z$ 轴转过角度$\delta$后与坐标系B重合，
$$\quad\left[\begin{array}{c}X_B \\ Y_B \\ Z_B\end{array}\right]=\left[\begin{array}{ccc}\cos \delta & \sin \delta & 0 \\ -\sin \delta & \cos \delta & 0 \\ 0 & 0 & 1\end{array}\right]\left[\begin{array}{l}X_A \\ Y_A \\ Z_A\end{array}\right]$$

> PS: 初等旋转矩阵特点：
> - 初等旋转矩阵都是可逆的
> - 初等旋转矩阵的逆矩阵等于其转置矩阵
> - 初等旋转矩阵的连乘所得的矩阵仍具有上述特点


***坐标系变换规则***
- 每次绕某坐标轴的旋转，相当于左乘一个初等旋转矩阵，多次旋转相当于用相应的初等旋转矩阵连续左乘。
- 旋转的正方向按右手法则确定（与坐标系之间角度正方向定义相同）
- 旋转顺序一般相同：y-z-x

***三种关系***
- 轴重合（弹道坐标系和速度坐标系），1次旋转
- 面含轴（速度坐标系与弹体坐标系、地面坐标系与弹道坐标系），2 次旋转
- 不相干（地面坐标系与弹体坐标系），3次旋转




### 2.1 地面坐标系与弹体坐标系

弹体坐标系相对于地面坐标系的姿态，通过由 **3 个角度**来确定，即将地面坐标系旋转三次即可与导弹体坐标系重合。
> 为了方便研究，将地面坐标系的原点平移到导弹瞬时质心上，这并不影响它与其他坐标系之间的旋转变换和角度关系。

- **俯仰角** $\vartheta$ : 导弹纵轴 ( $O x_1$ 轴) 与水平面（$Axz$）之间的夹角。导弹纵轴指向水平面上方, 俯仰角为 正; 反之为负。
- **偏航角** $\psi$ : 导弹纵轴 ( $O x_1$ 轴) 在水平面内投影（$Ax'$ 轴）与地面系 $A x$ 轴之间的夹角。迎$Ay$轴俯视（迎$Ax'z$平面观察；自上而下俯视）, 若由 $A x$ 轴 转至该投影方向是逆时针旋转, 则偏航角为正; 反之为负。
- **滚转角** (倾斜角、滚动角) $\gamma$ : 弹体坐标系 的$O y_1$ 轴与包含导弹纵轴的铅垂平面（$Ax'y'$）之间的夹角。由弹体尾部顺导弹纵轴前视, 若 $O y_1$ 轴位于上述铅垂面的右侧（即弹体向右倾斜）, 则滚转角为正; 反之为负。

>这三个角参数，也成为弹体的姿态角

![[coord5.png|250]]

***三次转换***

源坐标系：地面坐标系
目的坐标系：弹体坐标系
旋转方法：
- 首先是以角速度 $\dot{\psi}$ 绕地面坐标系的 $A y$ 轴旋转 $\psi$ 角, $A x$ 轴、Az 轴分别转到 $A x^{\prime} 、 A z^{\prime}$ 轴上，形成过渡坐标系 $A x^{\prime} y z^{\prime}$ 。转换矩阵为 $L(\psi)$
- 第二次是以角速度 $\dot{\vartheta}$ 绕过渡坐标系 $A z^{\prime}$ 轴旋转 $\vartheta$ 角, $A x^{\prime}$ 轴、Ay 轴分别转到 $A x_1$ 轴、 $A y^{\prime}$ 轴上, 形成新的过渡坐标系 $A x_1 y^{\prime} z^{\prime}$ 。转换矩阵为 $L(\vartheta)$
- 第三次是以角速度$\dot{\gamma}$绕 $A x_1$ 轴旋转 $\gamma$ 角, $A y^{\prime}$ 轴、 $A z^{\prime}$ 轴分别转到 $A y_1$ 轴、 $A z_1$ 轴上,与弹体坐标系重合。转换矩阵为$L(\gamma)$

地面坐标系 $Axyz$ 与弹体坐标系 $O x_1 y_1 z_1$ 之间的关系以矩阵形式表示为:

$$
{\left[\begin{array}{l}
x_1 \\
y_1 \\
x_1
\end{array}\right]=\boldsymbol{L} (\gamma, \vartheta, \psi)\left
[\begin{array}{l}
x \\
y \\
x
\end{array}\right]} 
$$
$$
\boldsymbol{L}(\gamma, \vartheta, \psi)=\boldsymbol{L}(\gamma) \boldsymbol{L}(\vartheta) \boldsymbol{L} (\psi)
$$
$$
\begin{aligned}
 L(\gamma, \vartheta, \psi)&=\left[\begin{array}{ccc}
1 & 0 & 0 \\
0 & \cos \gamma & \sin \gamma \\
0 & -\sin \gamma & \cos \gamma
\end{array}\right]\left[\begin{array}{ccc}
\cos \vartheta & \sin \vartheta & 0 \\
-\sin \vartheta & \cos \vartheta & 0 \\
0 & 0 & 1
\end{array}\right]\left[\begin{array}{ccc}
\cos \psi & 0 & -\sin \psi \\
0 & 1 & 0 \\
\sin \psi & 0 & \cos \psi
\end{array}\right] \\
\\
& =\left[\begin{array}{ccc}
\cos \vartheta \cos \psi & \sin \vartheta & -\cos \vartheta \sin \psi \\
-\sin \vartheta \cos \psi \cos \gamma+\sin \psi \sin \gamma & \cos \vartheta \cos \gamma & \sin \vartheta \sin \psi \cos \gamma+\cos \psi \sin \gamma \\
\sin \vartheta \cos \psi \sin \gamma+\sin \psi \cos \gamma & -\cos \vartheta \sin \gamma & -\sin \vartheta \sin \psi \sin \gamma+\cos \psi \cos \gamma
\end{array}\right]
\end{aligned}
$$
### 2.2 地面坐标系与弹道坐标系

***类型***
面含轴；即地面坐标系的 $Az$ 轴和弹道坐标系的 $Oz_2$ 均在水平面内（或着说地面坐标系的Ay轴在包含速度矢量的铅垂面（$Oy_2x_2$所在的平面），所以地面坐标系和弹道坐标系之间的关系通常由**两个角度确定**。即将地面坐标系旋转两次即可与导弹体坐标系重合。


***角度***
- **弹道倾角** $\theta$ : 导弹速度矢量V（即$Ox_2$轴）与水平面（$Axz$）之间的夹角。速度矢量指向水平面上方, 弹道倾角为正; 反之为负。
- **弹道偏角** $\psi_V$ : 速度矢量在水平面的投影（$Ax'$）与地面坐标系 $Ax$ 轴之间的夹角。迎 $Ay$ 轴俯视（自上而下俯视）, 若由 $A x$ 轴转至 $Ax'$（投影方向）是逆时针旋转, 则弹道偏角为正; 反之为负。

> 这两个角度的表示方式类似于前面的俯仰角、偏航角

![[coord6.png|225]]

***两次转换***

源坐标系：地面坐标系
目的坐标系：弹道坐标系
**旋转方法**： 
- 地面坐标系先以角速度$\dot{\psi}_V$绕 $Ay$ 轴旋转$\psi_V$角，使 $Az$ 轴、$Ax$ 分别与 $Ax'$ 轴、$Oz_2$ 轴重合，形成过渡坐标系 $Ax'yz_2$。其转换矩阵为：$L(\theta)$
- 然后以角速度$\dot{\theta}$绕$Oz_2$轴旋转$\theta$角，使得$Ax'$轴、$Ay$轴分别旋转到$Ax_2$轴、$Ay_2$轴，从而与弹道坐标系相重合。其转换矩阵为：$L(\psi_V)$

**矩阵形式**:

$$
\left[\begin{array}{l}x_2 \\ y_2 \\ z_2\end{array}\right]=\boldsymbol{L}(\theta) \boldsymbol{L}\left(\psi_V\right)\left[\begin{array}{l}x \\ y \\ z\end{array}\right]
$$
$$
\begin{aligned}
& \boldsymbol{L}\left(\theta, \psi_V\right)=\boldsymbol{L}(\theta) \boldsymbol{L}\left(\psi_V\right) \\
\\
\boldsymbol{L}(\theta) \boldsymbol{L}\left(\psi_V\right) & =\left[\begin{array}{ccc}
\cos \theta & \sin \theta & 0 \\
-\sin \theta & \cos \theta & 0 \\
0 & 0 & 1
\end{array}\right]\left[\begin{array}{ccc}
\cos \psi_V & 0 & -\sin \psi_V \\
0 & 1 & 0 \\
\sin \psi_V & 0 & \cos \psi_V
\end{array}\right]\\
\\
&=\left[\begin{array}{ccc}
\cos \theta \cos \psi_V & \sin \theta & -\cos \theta \sin \psi_V \\
-\sin \theta \cos \psi_V & \cos \theta & \sin \theta \sin \psi_V \\
\sin \psi_V & 0 & \cos \psi_V
\end{array}\right]
\end{aligned}
$$

### 2.3 速度坐标系与弹体坐标系

由于速度坐标系的 $Oy_3$ 轴与 $Oy_1$ 轴均在导弹纵向对称面（$Ox_1y_1$ 面）内，因此两个坐标系的关系通常由两个欧拉角来确定。

- **攻角**（迎角、冲角） $\alpha$ : 速度矢量 V（$Ox_2$轴）在弹体纵向对称面 $O x_1 y_1$ 内的投影（$Ox'$）与 $O x_1$ 之间的夹角。若 $O x_1$ 轴位于速度矢量投影线的上方（即产生正向升力）时, 攻角为正; 反之为负。
- **侧滑角** $\beta$ : 速度矢量与弹体纵向对称面之间的夹角。沿飞行方向观察, 若来流从右侧流向弹体 (即产生负侧向力, 后面会提到侧向力的方向）, 侧滑角为正; 反之为负。

![[coord7.png|250]]

***两次转换***

源坐标系：速度坐标系
目的坐标系：弹体坐标系
**转换方法**：
- 速度坐标系先以角速度 $\dot{\beta}$ 绕 $O{y_3}$ 轴旋转 $\beta$ 角, 转换矩阵为$L(\beta)$
- 然后以角速度 $\dot{\alpha}$ 绕 $O z_1$ 轴旋转 $\alpha$ 角, 最终获得弹体坐标系的姿态，转换矩阵为$L(\alpha)$

**矩阵形式为**:
$$
\begin{aligned}
& {\left[\begin{array}{l}
x_1 \\
y_1 \\
z_1
\end{array}\right]=\boldsymbol{L}(\alpha, \beta)\left[\begin{array}{l}
x_3 \\
y_3 \\
z_3
\end{array}\right]} \\
\\
& \boldsymbol{L}(\alpha, \beta)=\left[\begin{array}{ccc}
\cos \alpha \cos \beta & \sin \alpha & -\cos \alpha \sin \beta \\
-\sin \alpha \cos \beta & \cos \alpha & \sin \alpha \sin \beta \\
\sin \beta & 0 & \cos \beta
\end{array}\right]
\end{aligned}
$$




### 2.4 弹道坐标系和速度坐标系

由于弹道坐标系的 $Ox_2$ 和速度坐标系 $Ox_3$ 轴与导弹的速度矢量 V 重合，因此这两个坐标系之间一般用一个欧拉角就可以确定。

- **速度倾斜角** $\gamma_V$ : 位于纵向对称平面内的 $O y_3$ 轴与包含速度矢量的铅垂面 $O x_2 y_2$ 之间的夹角。从弹尾部向前看, 若纵向对称面向右倾斜, 则速度倾斜角为正; 反之为负。

![[coord8.png|200]]

***一次转换***
源坐标系：弹道坐标系
目的坐标系：速度坐标系
**转换方法**：
- 弹道坐标系以角速度 $\dot{\gamma}_v$ 绕 $Ox_2$ 轴旋转 $\gamma_V$ 即可实现与速度坐标系重合：
**矩阵形式表示**：
$$
 {\left[\begin{array}{l}x_3 \\ y_3 \\ x_3\end{array}\right]=L\left (\gamma_V\right)\left[\begin{array}{l}x_2 \\ y_2 \\ z_2\end{array}\right]} 
$$
$$L\left(\gamma_V\right)=\left[\begin{array}{ccc}1 & 0 & 0 \\ 0 & \cos \gamma_V & \sin \gamma_V \\ 0 & -\sin \gamma_V & \cos \gamma_V\end{array}\right]$$


## 2. 多智能体系统一致性问题
`对当前一致性方法根据定义、难点、分类进行简要总结`

**一致性问题 (Consensus Problem)**：是指智能体通 过与相邻节点进行信息交互，根据邻居的信息来不断修正自身的状态，随着时间的推移，最后使得系统内所有个体的**状态达到一致**。

多智能体系统一致性：在多智能体系统 中，没有中央协调控制或者全局通信的情况下，随着时间的推移，智能体之间通过局部的耦合作用，最终 使得所有的智能体状态 (如位置、速度、加速度等) 趋于一致。解决一致性问题的关键：设计合理有效的**一致性控制算法**，使得各智能体的状态收敛到一致。研究控制问题时，**收敛速度**是 一个重要的衡量指标，同样的，在一致性问题研究中，考虑收敛速率的不同在实际工程应用中的差别，也需要对一致性收敛速率进行分析。


###  2.1 基础总结

***建模方法***
图论和矩阵是一致性问题研究分析中非常重要的工具，通常采用图来表示多智能体相互间传递信息的关系。采用矩阵描述智能体节点与边之间的关系。

***方法分类：***
- 基于控制的方法：MSR；从数学角度证明可达到一致性；针对整体建模，邻接权重均分，当存在问题节点时，对好坏节点进行选择更新自身状态。
- 基于强化学习的方法：Q-consensus；利用强化学习进行权重分配，通过一定的条件判断一致性；重点关注信任评估/权重分配，正常节点邻接权重被分配较大的值。

**RL解决一致性问题本质**：视为优化问题，通过优化每个节点相邻权重的值，识别出错误节点的同时（错误节点权重降低），以最短的时间使正常的节点的状态达到一致。


***难点***
- 通信量大小：期望以较少的通信量实现收敛
- 动态拓扑：拓扑结构不是静态固定的；可以是与某一节点随机通信，也可以是与不同节点随机通信
- 通信时延：通信过程中，不能及时获得当前时刻邻居节点的状态
- 容错：存在错误节点信息作为干扰
- 收敛时间：收敛时间长短可以作为判断算法效用的评价指标

***关键点***
- 拓扑结构的设定；不同的拓扑结构，需要针对设定不同的算法； 生成树、强连通性等要求
- 错误节点：错误节点的个数要满足一定的约束
- 建模过程：强化学习重点关注权重分配，通过修改邻接权重来达到一致性，传统控制方法从整体角度去理论证明。


## 3. 两种制导结构
`对上次调研到的两种制导结构进行介绍`

- **双层协同制导结构**：分散于各弹的*底层导引控制层*与处理协调信息的*上层协调控制层*。
- **领弹-从弹结构**：首先选取适当的领弹，被领弹跟踪领弹相对目标的运动状态从而作出控制，实现协同

### 3.1 双层协同制导结构

双层协同制导结构，该双层协同制导结构将协同制导中的控制分为两层：分散于各弹的底层导引控制层与处理协调信息的上层协调控制层。

**底层导引控制层**（制导律）： 在收到一致的协调信息后，通过自身的底层制导律产生控制指令。
**上层协调控制层**（协调策略）： 通过协调策略得到一致的协调变量，每个参战弹按照一定的协调变量作出控制以此实现协同。 

> PS： 根据状态量$x_i$和控制量$u_i$可以得到可行协调变量集 $\Theta_i=\left\{\theta \in R_i \mid \theta_i=f\left(x_i, u_i\right)\right\}(f$ 为映射到协调变 量空间的函数), 而控制量 $u_i$ 可以由确定的状态与 协调变量 $\theta_i \in \Theta_i$ 唯一确定, 因此, 如果所有的参 战弹有一致的协调变量, 即 $\theta_1=\theta_2=\cdots=\theta^*$, 在 $u_i=g\left(x_i, \theta_i^*\right)$ 的控制下 $(g$ 为产生控制量的函数 $)$, 系统可实现协同。


双层制导结构可以根据不同的任务需求，选择不同的**制导律与协调策略**，因此具有一定通用性。

### 3.2 领弹-从弹结构

在领弹-从弹制导结构中，首先选取适当的领弹，将领弹的`弹目距离`和`前置角`作为其他弹的参
考状态，被领弹跟踪领弹相对目标的运动状态从而作出控制，最终所有弹相对目标的距离与前置
角都逼近领弹，实现协同。

从某种意义上讲，领弹-从弹协同制导是双层协同制导结构的特例，其底层制导律根据自身与领弹的弹目相对运动误差作出控制，上层协调策略直接以领弹与目标的相对运动作为协调变量。领弹-从弹制导中，领弹相对独立，不必经过协调策略便可以得到协调信息，**协同实时性更好**，但一旦领弹发生故障，整个协同制导就会失效，因此，该结构**鲁棒性相对较差**。

### 3.3 对比总结

- **优缺点**：领弹-从弹制导结构需要选取满足特定条件的弹作为领弹，当领弹出现故障时整个协同失效，鲁棒性与可靠性较差，相比之下，双层协同制导可以任意选取集中协调单元，也可以有多个协调单元，在分布式双层协同制导时单个协调单元故障不会对整体协同造成很大影响，鲁棒性更强。但领弹-从弹制导作为双层协同的一种特例，其以**减少集中协调处理为代价**，省去了计算协调信息的时间，使群体交流实时性增强，
- **扩展性**：领弹-从弹结构在扩展群体时，可以任意添加从弹而协调信息处理时间不会增加，制导结构更为简单。
- **制导律**：双层协同制导的各弹可以使用相同的制导律，也可以使用不同的制导律来实现协同，但领弹-从弹制导结构中的从弹的制导指令要考虑协调信息，而领弹不必，所以，领弹与从弹的制导律不同。


***下周主要任务安排：***
- [ ] 导弹飞行力学基础知识学习：作用在导弹上的力和力矩
- [ ] 协同制导、编队控制、一致性问题相应算法学习
- [ ] 学习RL在 协同制导、编队控制 中的应用


