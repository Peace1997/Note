
# 一、综述
系统辨识是通过观察和分析系统的输入和输出数据，来建立系统数学模型的过程。通常这个系统未知，但是局部输入输出数据可以测出，**系统辨识的任务就是根据这部分信息寻找确定函数或确定系统来逼近这个未知函数**。
## 1. 基本元素
系统辨识由数据、模型集和参数估计组合。最终辨识的结果精度则是由这三部分共同决定。
**数据**：包括连续信号和离散信号，是辨识的基础和有效信息的来源；
**模型**：集包括微积分方程、拟合曲线函数、有限元和神经网络模型等，是备选模型的集合；
**参数估计**：
- 最小二乘法：最小化预测误差的平方和
- 最大似然法：寻找使观测数据出现概率最大的参数值
- 贝叶斯估计：将先验知识纳入估计过程，提供参数的概率分布
- 神经网络：非线性拟合

## 2. 实现步骤
- 实验设计：设计适当的输入信号来激励系统
- 数据收集：记录系统的输入和相应的输出数据
- 模型选择： 根据先验知识和系统特性选择合适的模型结构
- 参数估计：使用收集的数据来估计模型的参数，使模型的输出尽可能接近实际系统的输入。
- 模型验证：评估系统的准确性和有效性


# 二、实例

## 1. 强化学习控制器辨识
论文的系统辨识是针对强化学习控制器控制下的闭环系统（双足机器人动态闭环系统）进行的。具体来说：
1. 系统辨识的目标:
    - 作者的目标是基于这些观测数据, 建立一个**低维线性模型来近似描述强化学习控制器闭环系统的动态特性**。
    - 这个线性模型可以更方便地进行分析和设计, 比如应用模型预测控制等方法。
2. 输入输出数据的收集（数据收集）:
    - 作者使用强化学习算法训练出一个控制器,该控制器控制着一个动态系统。
    - 在训练过程中,作者记录了控制器的期望速度控制指令(系统输入)以及相应的系统状态变化(系统输出)。
    - 这些系统输入输出数据构成了用于系统辨识的观测数据集。
3. 系统辨识的过程:
    - 作者首先选择了一个合适的线性模型结构来表示闭环系统。
    - 然后使用参数估计技术,从观测数据中估计出线性模型的参数。
    - 最后对辨识得到的线性模型进行验证,确保它能够准确描述原始闭环系统的动态行为。
总之,论文中的系统辨识是针对强化学习控制器闭环系统进行的,目的是获得一个简化的线性模型,为后续的安全性分析和控制设计提供基础。
![[Pasted image 20240814112041.png]]

## 2. 电机参数辨识
### 1. 通过电机动态方程进行辨识

电机的运动方程（忽略非线性和其他复杂因素的简化模型）可描述为：

$$
J \frac{d\omega}{dt} + B \omega + C \operatorname{sign}(\omega) = T_e
$$

其中：
- $J$是电机的转动惯量。
- $\omega$是电机的角速度。
- $B$是粘性摩擦系数。
- $C$是库仑摩擦力。
- $T_e$是电机的电磁转矩，可通过转矩常数$k_t$和电流$I$得到：$T_e = k_t I$（这里假设电机是理想的无铁损或无杂散损耗）。

通过实验数据测量$\omega$和$I$，可以建立方程来求解$J$、$B$和$C$等参数。

### 2. 开环加速法辨识惯量

在开环加速实验中，通过给电机施加一个已知的恒定电流，使电机产生恒定的电磁转矩$T_e$：

1. **实验步骤**：给定电流$I$，并记录电机角速度随时间的变化，直到电机达到稳定速度（惯性负载越小，达到稳定速度越快）。
2. **建立方程**：根据牛顿第二定律和电机模型，有：
   
$$
   J \frac{d\omega}{dt} = T_e - B \omega - C \operatorname{sign}(\omega)
$$ 

3. **数据处理**：在电机启动阶段，摩擦力对速度变化的影响较小（特别是当速度较低时），可以忽略粘性摩擦系数$B$和库仑摩擦力$C$，因此可以简化为：

   $$
   J \frac{d\omega}{dt} \approx T_e
   $$

   从而得到转动惯量$J$：

   $$
   J \approx \frac{T_e}{\frac{d\omega}{dt}}
   $$

   其中，$\frac{d\omega}{dt}$可以通过实验测量得到。

### 3. 粘性摩擦系数和库仑摩擦力辨识

在确定惯量$J$后，可以进一步辨识粘性摩擦系数$B$和库仑摩擦力$C$。

#### 步骤 1：以不同恒定速度运行电机

1. 在不同恒定速度下运行电机，记录电流$I$（转矩$T_e = k_t I$），在恒定速度时，惯量项$J \frac{d\omega}{dt}$可以忽略，因此有：
   
   $$
   B \omega + C \operatorname{sign}(\omega) = T_e
   $$

2. 在多个不同恒定速度下重复实验。可以得到一组方程，解出粘性摩擦系数$B$和库仑摩擦力$C$。

#### 步骤 2：拟合粘性摩擦系数$B$

粘性摩擦力$B \omega$是随速度$\omega$线性变化的部分，可以使用线性回归等方法拟合，得到粘性摩擦系数$B$。

### 4. 梯度下降法或最小二乘法优化辨识

如果实验数据较多且存在噪声，可以建立误差函数：

$$
\text{误差} = \sum_{i} \left ( J \frac{d\omega_i}{dt} + B \omega_i + C \operatorname{sign}(\omega_i) - T_{e_i} \right)^2
$$

使用梯度下降或最小二乘法来求解，使误差最小，从而优化得到$J$、$B$和$C$。

### 5. 使用频率响应法辨识惯量

在一些高精度要求的场合下，可以采用频率响应法：

1. 向电机施加不同频率的正弦激励，并测量电机响应。
2. 通过分析电机的幅值响应和相位响应，可以辨识出系统的惯量$J$和摩擦力参数。

### 6. 基于控制系统的参数辨识

若电机处于闭环控制系统中，也可以通过控制系统的传递函数特性来辨识惯量和摩擦力：

1. 通过阶跃响应或频率响应分析电机的传递函数。
2. 结合已知的控制系统参数，解算出电机的惯量和摩擦力参数。

### 总结
电机的惯量和摩擦力参数辨识需要结合理论模型和实验数据。上述方法各有优势，通常可以先用加速法粗略估计惯量，再通过稳态速度实验估计摩擦力参数，最后使用最小二乘等优化方法提高参数辨识精度。

参考：
- Bridging Model-based Safety and Model-free Reinforcement Learning through System Identification of Low Dimensional Linear Models