### A multirobot target searching method based on bat algorithm in unknown environments

## 未知环境下基于bat算法的多机器人目标搜索方法

- 简述

  - BA算法描述：与PSO相比，BA算法多了**频率**属性和**响度**；频率+**相对距离**会决定蝙蝠的**速度**，而速度与当前位置决定蝙蝠的下一个位置。

  - BA算法缺点：参数调整不好容易导致收敛速度不稳定，后期收敛速度慢、精准度低，容易陷入局部最优和早熟收敛，同时难以保持多样性，全局搜索能力低。

  - 未知环境机器人信息获取：因为缺乏环境模型等先验信息，因此需要利用传感器感知获取环境信息，这里有几种假设：

    - 机器人之间存在通信机制
    - 机器人根据目标和障碍物发出的信号类型配备不同类型传感器
    - 目标发出光或热信号，机器人可以感知到

  - 适应度函数：
    $$
    F\left(x_{i}^{t}\right)=\max \left(0,\left(1-\frac{\operatorname{Dist}\left(x_{i}^{t}\right)}{\text { Msen }}\right)\right) \times \frac{\text { pow }}{\text { Mpow }}
    $$

    > $Dits(x^t_i)：$机器人$i$距离目标的距离
    >
    > Msen：机器人距目标最远距离，在这里是环境的对角线长度
    >
    > pow：当前目标的能量
    >
    > Mpow：目标的最大能量
    >
    > 在这里，假设机器人有足够的能量完成目标搜索任务，在这里pow= Mpow =1
    >
    > 越大越好

- 目标：

- 创新点

  - **自适应惯性权重**（Adaptive Inertial Weight ）：权重的大小由进化因子和聚集因子决定；当机器人之间距离较近时，聚集因子将会增加；适应度变化较小时，进化因子下降。
    $$
    \begin{aligned}
    &\omega_{i}^{t}=R \cdot\left(\omega_{i n i}-a h_{i}^{t}+\beta s\right) \\
    &h_{i}^{t}=1-\left[\frac{\min \left(f\left(x b e s t_{i}^{t-1}\right), f\left(x b e s t_{i}^{t}\right)\right)}{\max \left(f\left(x b e s t_{i}^{t-1}\right), f\left(x b e s t_{i}^{t}\right)\right)}\right] \\
    &s=\left[\frac{\min \left(F_{t B e s t}, \bar{F}_{t}\right)}{\max \left(F_{t B e s t}, \bar{F}_{t}\right)}\right]
    \end{aligned}
    $$

    > 聚集因子增加或进化因子降低将会导致权重增加，增加全局探索能力，跳出局部最优解。
    >
    > 解决问题：增加种群多样性，跳出局部最优解，加快搜索速度

    > 进化因子：当适应度变化较小时，同理，后面分子比值会增大，1-这个比值就会减少。h减少了那么w增大，自适应权重增大，全局探索增加目的：增加了多样性，适应度值不怎么变化就会导致陷入局部最优解
    >
    > 聚集因子：机器人之间距离较近时，这就说明平均值与最优值差距不大，会趋近于1；这个时候聚集因子将会增加。目的：避免机器人聚集在一起、跳出局部最优解。

  - **多普勒效应**（Doppler Effect ）：基于ARBA的多普勒效应，可以自适应（机器人与目标的距离）的调整频率来调整机器人的速度，帮助机器人避免早熟。
    $$
    \begin{aligned}
    &f_{i}=f_{\min }+\left(f_{\max }-f_{\min }\right) \cdot d(i) \\
    &d_{i}=\left(\frac{v \pm v_{i}^{t}}{v \mp v_{s}}\right) \cdot d_{0}
    \end{aligned}
    $$

    > 多普勒效应：当声源相对于静止的观察者移动时//观察者相对于静止的，观察者听到的音调会发生变化.频率会随着观察者与其声源的之间的距离变化而变化（观察者和声源的相对移动可以改变感知的声音频率）
    >
    > 作用：跳出局部最优，防止早熟收敛，使运动轨迹更加平滑

    > 之前的频率公式具有很强的随机性，在目标搜索时，机器人的运动轨迹不是很平滑，同时BA算法容易选入局部最优和早熟收敛
    >
    > 去掉了之前的Beta这个随机数，改为了一个自适应的参数观测频率d（i）

    >靠近时$d_i$会增加，导致 $f$增加，$f$增加速度增加；远离时，$d_i$ 减少，导致 $f$ 减少，速度减缓；
    >
    >靠近时会加快到达目标点，远离目标时会减缓远离的速度

  - **多群体**（Multiswarm）：将整个种群分为多个子群，子群内可以交换信息，各子群最优个体可以相互交换信息。

    > 作用：扩大机器人搜索范围，增加种群多样性，跳出最优解，加快搜索速度

- 过程

  ![image-20210627171207984](/Users/mapeixin/Documents/Typora/未知环境/img/Paper2_4.png)

  > 注：
  >
  > - 机器人可以通过距离传感器检测检测障碍物和其他智能体
  >
  > - 公式7后半部分，$c_1r_1(ox^t_i - x^t_i)$，其中$c_{1}=\mu \cdot \omega_{i}^{t} \cdot O_{i}^{2}$
  >   - $c_1$：传感器没有检测到障碍物的话，就设为0
  >   - $u$：常数设为6
  >   - $O_i$：单调的感知函数，机器人距离其他机器人或障碍物越远，值越小；反之越大。
  >   - $w_i^t$：惯性权重
  >
  > - 公式8没有使用全局最优解，而是使用了自身之前的最优解。这样的话按照自身轨迹运行，避免了聚集。

  **初始化阶段**

  - 初始化适应度函数$F$

  - 初始化机器人群组 $X(x_i range：I=1，2，…. m)$

  - 对所有机器人的位置x和速度v进行初始化

  - 初始化脉冲发射率$r$、脉冲速率（频率）$f_i(f_{min}< f < f_{max})$、响度$A_i$

    

  **迭代寻优阶段**：当迭代次数小于最大迭代次数时

  - 将机器人划分为 $M$ 个子群

  - 计算所有机器人的适应度值，找到每个机器人$x_i$的最优适应度值（类似于pbest；找自身最优解）

  - 如果某个机器人$x_i$的适应度函数值大于其所属种群的的适应度函数值（类似于gbest；找子群m最优解）

    - 则将机器人$ i$ 的适应度值更新为该所属 $ m $ 子群的最优适应度值

    - 同时修改$m$子群最优位置为机器人 $i$ 的位置（机器人$i$属于$m$子群）

    - 通过公式13、7、3,分别更新$t+1$时刻的频率 f、速度 v、位置 x
      $$
      \begin{aligned}
      &f_{i}=f_{\min }+\left(f_{\max }-f_{\min }\right) \cdot d(i) \\
      &v_{i}^{t+1}=\omega_{i}^{t} v_{i}^{t}+\left(x_{i}^{t}-x_{*}\right) \cdot f_{i}+c_{1} r_{1}\left(o x_{i}^{t}-x_{i}^{t}\right) \\
      &x_{i}^{t+1}=x_{i}^{t}+v_{i}^{t+1}
      \end{aligned}
      $$

  -  为每个机器人从[0,1]中分配一个随机数，如果某个机器人x_i产生的随机数的值大于脉冲发射速率r

    - 根据机器人$x_i$之前出现的最优位置 $xbest_i$，通过公式8，生成一个新的局部位置
      $$
      x_{\text {new }}=x \text { best }_{i}+\varepsilon . A^{t}
      $$

  -  如果某个机器人$x_i$产生的随机数小于脉冲发射速率 $r$，则仍然为通过公式3得到位置

  - 为每个机器人在[0,1]中随机生成一个数，如果某个机器人 $x_i$，生成的数小于响度 A，以及他在 t+1 时刻的新位置的适应度值大于该机器人之前最优的适应度值：

    - 接受上一步产生的新解

    - 通过公式 5 降低$A_i$值，通过公式6增加$r_i$的值
      $$
      \begin{aligned}
      &A_{i}^{t+1}=\alpha A_{i}^{t} \\
      &r_{i}^{t+1}=r_{i}^{0}[1-\exp (-\gamma t)]
      \end{aligned}
      $$

  - 对所有机器人的适应度值进行排序，找出当前的最优解$x_*$和最优值。

  - 如果目标被发现，或达到结束条件（最大迭代次数）退出循环，否则继续迭代

  

- 实验

  - 机器人初始位置相对较远(同在顶部)

    <img src="/Users/mapeixin/Documents/Typora/未知环境/img/paper2_5.png" alt="image-20210610082015575" style="zoom:50%;" />

    - ARBA相较于 A-RPSO和RBA
      - 因为采用了自适应权重的方法，ARBA比其更能跳出局部最优解，花更少的迭代次数更快的找到目标
      - 因为ARBA采用了多普勒效应，因此ARBA的运动轨迹更加平滑。
      - 因为ARBA采用了多群体策略，因此增加了多样性（扩大了搜索范围），例如图i，左边的子群最先发现了目标位置，而此时其他子群在其他位置，而图c和f是所有机器人一起移动到全局最优解。

  - 机器人初始位置相对分散

![](Paper_2_2.png)

  - 机器人初始位置相对较近

![](Paper_2_3.png)

- 缺点
  - 单一目标搜索
  - 搜索目标是静态
  - 复杂环境、障碍物较大时表现不好
  - 避障能力不足

  
