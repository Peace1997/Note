**基本流程**
首先，通过视觉感知和定位，获取车辆的三维点云数据，确定车辆的精确位置和车辆的关键部位，然后根据清洗工具（清洗动作）和车体信息以及机械臂的运动学因素，规划机械臂的运动轨迹，并根据清洗动作的时序要求，对初步生成的路径进行平滑处理, 优化机械臂的运动速度和加速度曲线，最后将优化后的机械臂运动轨迹转换为各关节的实际位置、速度指令。通过伺服控制系统精确驱动机械臂沿计划路径运动。

在此基础上也可可以加入，过程监控、异常处理、结果反馈。对运行数据进行保存，为日后实现更智能化的洗车提供元始训练数据集。

**整体发展：**

基于传统方法研发下一代智能洗车机器人系统作为主线的同时，还要跟踪当前机器人领域的最新进展。要实现机械臂对多变环境和需求的适应以及更广泛应用。需要机械臂具备更强学习和适应能力，以及更高智能化水平，具身智能在泛化操作中非常重要，跟踪当前具身智能的最新研究进展。


对于目前机器人领域落地难，适应性差的问题，一个关键的因素是数据集不够。例如在仿真环境中，虽然可以获取大量的仿真交互数据，但是存在 sim 2 real 的问题，另一种方案是直接使用真机与环境交互进行训练，这样的方式虽然避免了 sim 2 real 的问题，但是毫无疑问会增加成本。


因此，我们在发展我们智能洗车机器人的过程中，要保存各项交互数据，为下一步发展更加智能化奠定基础。


**未来技术调研：**
- 多模态数据融合
- 大模型赋能通用操作，强化学习助力攻克复杂环境难题。


公司也围绕整个洗车系统拥有 40 多项专利，包括洗车系统的装置、图像的算法等等。

洗车建模、轮毂清洗、玻璃清洗、车身清洁、高压冲洗、水蜡增亮、风力烘干
# 视觉感知和定位

- 使用高精度的 RGB-D 相机或结构光扫描器获取车辆表面的**三维点云数据**。
- 采用深度学习的**目标检测算法**(如 YOLO、Faster R-CNN 等)识别车辆的关键部位, 如车身、车窗、轮胎等。
-  获取车辆在世界坐标系下的精确**位置信息**,为后续的路径规划和清洗动作提供基础数据。

## 整体流程

1. 3D 数据采集:
    - 使用高精度 RGB-D 相机或结构光扫描仪采集车辆的三维点云数据。
    - 获取车辆表面的完整三维几何信息。
2. 图像分割:
    - 采用深度学习的图像分割网络,如 U-Net、Mask R-CNN 等,对采集的 RGB 图像进行语义分割。
    - 识别出车身、轮胎、车窗等关键部位。
3. 目标检测:
    - 使用目标检测网络,如 YOLO、Faster R-CNN 等,定位车辆的位置和姿态。
    - 检测车辆的关键特征点,为后续的位置估计和路径规划提供基础数据。
4. 点云分割:
    - 利用基于深度学习的点云分割算法,如 PointNet、PointNet++,对三维点云数据进行细分割。
    - 将车辆表面进行精细的区域分割,为清洗动作规划提供依据。
5. 位置估计:
    - 结合2D图像和3D点云数据,使用基于深度学习的姿态估计网络,估计车辆在世界坐标系下的精确位置。
    - 为后续的路径规划和机械臂控制提供关键输入。


三维点云数据包含以下几类主要信息:
1. 空间坐标:
    - 每个点都有对应的三维空间坐标 (x, y, z)，描述了点在三维空间中的位置。
2. 颜色信息:
    - 点云数据通常还会包含每个点的颜色信息，即 RGB 值。这样可以保留原始物体的颜色特征。
3. 法线信息:
    - 对于每个点，还可以计算出其法线方向，即该点表面的法向量。法线信息可用于描述点云数据的几何特性。
4. 反射强度:
    - 部分三维传感器还可以获取每个点的反射强度信息，反映了物体表面的反射特性。
5. 语义标签:
    - 通过深度学习的分割算法，可以为点云数据中的每个点附加语义标签，如"车身"、"轮胎"等。

# 路径规划

- 根据车辆几何信息, 采用路径规划算法 (如 A* 算法、RRT 等)为机械臂规划出最优的清洗路径。
	- 在这个过程中需要考虑机械臂自身运动学因素（工作空间限制、碰撞检测、动力学因素），生成安全可行的轨迹。
	- 

## 数据输入

- **车辆几何信息:** 从 RGB-D 相机获取的三维点云数据, 可以用于构建车辆的精确 3 D 模型。
- **车辆位姿信息:** 利用深度学习的目标检测和姿态估计算法, 获取车辆在世界坐标系下的精确位置和姿态。包括车辆在 3 D 空间中的位置坐标和朝向角度。
- **工作空间信息:**  描述机械臂的活动范围和受限条件,如工作区域、关节角度限制等。确保规划的路径在机械臂的工作空间内安全可行。
- **碰撞检测信息:** 利用 3 D 点云数据, 对机械臂运动轨迹进行实时的碰撞检测。识别可能发生的碰撞隐患, 并优化路径规划以避免碰撞。
- **清洗动作信息: (下游信息)** 根据不同的清洗部位(车身、轮胎等),定义相应的清洗动作序列。将清洗动作的空间位置和时序要求反馈给路径规划模块。
## 整体流程

1. 环境建模:
    - 利用 RGB-D 相机采集的三维点云数据,构建车辆及其周围环境的三维模型。
    - 提取车辆的几何特征,如车身形状、尺寸、轮胎位置等。
2. 车辆定位:
    - 使用目标检测和姿态估计算法, 确定车辆在世界坐标系下的精确位置和姿态。
	    - 目标检测算法可用于识别和定位车辆的关键部位,如车身、轮胎、车窗等
    - 获取车辆在三维环境中的准确坐标和方向信息。
3. 机械臂建模:
    - 建立机械臂的运动学模型,描述各关节的自由度和活动范围。
    - 确定机械臂的工作空间边界条件,如碰撞避障要求等。
4. 路径规划:
    - 根据车辆位置、姿态和清洗动作要求,使用优化算法规划出机械臂的最优运动轨迹。
    - 考虑工作空间限制和碰撞检测,确保路径的安全性和可执行性。
5. 轨迹优化:
    - 对初步生成的路径进行平滑处理,消除尖锐变化点。
    - 根据清洗动作的时序要求,优化机械臂的运动速度和加速度曲线。
6. 运动控制:
    - 将优化后的机械臂运动轨迹转换为各关节的实际位置、速度指令。
    - 通过伺服控制系统精确驱动机械臂沿计划路径运动。


# 运动控制

- 利用基于伺服电机的机械臂, 精确控制每个关节的运动。
	- 采用基于位姿反馈的伺服控制算法,实现对机械臂末端执行器的精准定位。

# 清洗动作

- 在机械臂末端安装洗车工具, 如清洗刷、喷洒装置等。
- 根据不同的清洗场景,如车身、轮胎等,设计相应的清洗动作序列（设置相应的运动原语）。


> 在人工清洗的任务中，他的清洗动作看似是比较多样的，但是我们可以从中抽象出几种常用有效的清洗动作，作为我们的运动原语（标准化的清洗动作序列） 

# 系统集成

- 将视觉感知、路径规划、机械臂控制等子模块集成为一个完整的自动洗车系统。
- 采用基于ROS(机器人操作系统)的软件架构,实现各模块之间的高效协作。


# 可加入

## 过程监控


- 可以使用摄像头来观察洗车效果，来判断车辆是否洗净，哪些区域还存在污渍。
- 在洗车过程中，为避免出现意外的发生，可以通过传感器来检测洗车工具的状态，例如，可以使用压力传感器来检测高压水枪的压力，并可以使用温度传感器来检测海绵刷的温度。


## 结果反馈与记录

- 在运行过程中，我们是可以记录各项运行数据以及洗车的结果评价（干净程度，成本消耗）
	- 首先，这有利于我们更好的改进现有的方法和策略
	- 然后，这也可以为我们日后采用 AI 算法提供数据集，当然智能机器人落地难的一个重要因素就是数据不够，我们保存各项运行数据可以为我们日后训练智能洗车策略提供一个很好的数据集支撑。为我们日后采用 AGI、大模型、强化学习等方法提供一个很好的数据集。
