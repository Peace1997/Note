

# 一、运动学

## 运动学


## 动力学

正向动力学和反向动力学是机器人学中两个核心的概念，分别描述了机器人的运动状态与其控制输入（如关节力矩或位置）的关系：
- **正向动力学**：已知驱动力或力矩，求解关节的加速度、速度和位置。主要用于仿真和运动预测。
- **反向动力学**：已知运动轨迹（位置、速度、加速度），求解所需的力矩或驱动力。主要用于控制和力矩计算。

### 正向动力学（Forward Dynamics）

正向动力学问题是根据机器人的**关节力矩**或**驱动力**来计算**关节的加速度、速度和位置**。它描述了机器人在给定的驱动力（或力矩）作用下会如何运动，是一种“已知输入求输出”的过程。正向动力学的应用场景包括：

- **运动仿真**：通过给定的力或力矩，计算机器人如何运动，以便模拟和分析其运动过程。
- **运动预测**：根据已知的关节驱动力矩，预测机器人下一步的位置、速度和加速度，帮助规划和评估运动轨迹。
  
数学上，正向动力学的基本形式可以表示为：
$$
M (q) \ddot{q} + C (q, \dot{q}) \dot{q} + G (q) = \tau
$$
其中：
- $M (q)$ 是关节位置 $q$ 的惯性矩阵，
- $C (q, \dot{q})$ 是科氏力和离心力矩阵，
- $G (q)$ 是重力向量，
- $\tau$ 是关节力矩。

根据这些力和力矩，正向动力学求解关节的加速度 $\ddot{q}$，再通过积分获得关节速度 $\dot{q}$ 和位置 $q$。

### 反向动力学（Inverse Dynamics）

反向动力学问题是已知机器人的**关节位置、速度和加速度**，求解**需要的关节力矩或驱动力**。它描述了要让机器人按指定的轨迹运动所需的控制输入，是一种“已知输出求输入”的过程。反向动力学的应用场景包括：

- **轨迹控制**：根据预定轨迹，计算需要施加的力或力矩，以确保机器人按期望的路径移动。
- **力矩控制**：在精确控制下，通过反向动力学计算得到的力矩来精确施加控制力，维持运动稳定性。
  
数学上，反向动力学也基于相同的动力学方程：
$$
\tau = M (q) \ddot{q} + C (q, \dot{q}) \dot{q} + G (q)
$$
在此公式中，已知 $q$、$\dot{q}$、$\ddot{q}$ 后，通过反向动力学求出满足期望运动的力矩 $\tau$。


人形机器人的动力学参数主要包括质量、惯性、关节位置、力矩和阻尼等属性。这些参数在描述和控制机器人的运动中扮演重要角色。以下是人形机器人动力学中常用的参数：

### 动力学参数

1. ***质量参数***
   - **关节质量（Mass）**：描述机器人每个连杆或部件的质量，通常用来计算惯性力和重力。
   - **质心位置（Center of Mass, CoM）**：指每个连杆的质心相对于其参考点的位置，用于计算重力作用和动量。

2. ***惯性参数***
   - **惯性张量（Inertia Tensor）**：反映了物体质量在各个方向上的分布情况；描述每个连杆在不同轴上的惯性分布情况，定义了刚体在各方向上的转动惯性。这对于计算旋转运动和力矩很重要。
   - **惯性矩（Moment of Inertia）**：表示刚体绕特定轴的转动惯性，通常是惯性张量的简化形式。


3. ***几何参数***
   - **关节位置（Joint Position）**：描述关节的空间位置，即关节在全局或局部坐标系中的位置。几何位置对于描述机器人姿态和规划路径至关重要。
   - **连杆长度（Link Length）**：描述相邻关节之间的距离，用于定义机器人结构的尺寸。

 4. ***关节参数***
   - **关节角（Joint Angle）**：描述关节的旋转角度，是机器人姿态的主要控制变量之一。
   - **关节速度和加速度（Joint Velocity and Acceleration）**：描述关节的运动状态，是反向动力学和控制计算的输入参数之一。
   - **关节力矩（Joint Torque）**：表示关节所需的驱动力或力矩，通常是反向动力学的输出，用于实现期望的关节运动。

5. ***摩擦和阻尼参数***
   - **摩擦系数（Friction Coefficient）**：关节的摩擦阻力会影响运动平稳性，通常根据实际情况或实验数据给出。
   - **关节阻尼（Damping Coefficient）**：关节阻尼是关节速度与产生的阻力之间的关系系数，用于模拟关节的能量耗散效果。

6. ***动力学方程参数***
   - **惯性矩阵（Inertia Matrix, $M (q)$）**：描述关节质量对运动的影响，依赖于机器人姿态，影响关节的加速度。
   - **科氏力和离心力项（Coriolis and Centrifugal Forces, $C (q, \dot{q})$）**：描述了机器人在加速时所需克服的离心力和科氏力，主要影响到控制力的计算。
   - **重力向量（Gravity Vector, $G (q)$）**：描述重力对各关节的影响，通常是重力分布在关节上的力矩，用于反向动力学计算。

7. ***接触参数***
   - **接触点位置（Contact Point Location）**：描述脚底等部位与地面或物体接触的具体位置。
   - **接触力和摩擦力（Contact Force and Friction Force）**：模拟机器人在接触时产生的支撑力和摩擦力，是步态规划和稳定性分析的重要参数。

8. ***控制参数***
   - **电机功率和扭矩输出范围**：电机的输出功率和最大力矩决定了机器人动作的速度和力量。
   - **传动比（Gear Ratio）**：影响电机的输出特性，将电机的旋转转化为关节运动。

这些动力学参数共同作用，决定了人形机器人的运动性能和控制难度。精确地获取和设置这些参数，对于构建逼真的机器人模型和实现稳定的控制有至关重要的影响。

### 惯性张量

惯性张量和惯性矩都是描述物体旋转惯性的重要物理量，但它们在应用上有一些区别。

#### 1. 惯性张量（Inertia Tensor）

惯性张量是描述物体绕各个轴旋转时的惯性分布的矩阵，是一个 3 x 3 的对称矩阵。它的每个元素都代表物体在不同轴上的惯性属性，**反映了物体质量在各个方向上的分布情况**。惯性张量的定义如下：

$$
I = \begin{bmatrix} I_{xx} & I_{xy} & I_{xz} \\ I_{yx} & I_{yy} & I_{yz} \\ I_{zx} & I_{zy} & I_{zz} \end{bmatrix}
$$

其中：
- 对角线元素 $I_{xx}, I_{yy}, I_{zz}$ 是关于各自坐标轴的惯性矩。
- 非对角线元素 $I_{xy}, I_{xz}, I_{yz}$ 表示各坐标轴之间的惯性耦合，称为惯性积。

惯性张量描述了刚体在三维空间中旋转时的动态行为，广泛用于三维旋转运动的动力学计算。例如在物体绕任意方向旋转时，惯性张量可以帮助计算出角动量和角加速度之间的关系。

#### 2. 惯性矩（Moment of Inertia）

惯性矩是惯性张量的特例，通常表示物体绕某一特定旋转轴的旋转惯性。它是惯性张量的对角元素，即 $I_{xx}, I_{yy}, I_{zz}$，用于描述物体绕单个轴的惯性大小。惯性矩通常通过下列公式计算：
$$
I = \int_V \rho (r) \cdot r^2 \, dV
$$
其中：
- $\rho (r)$ 是物体在位置 $r$ 处的质量密度，
- $r$ 是该位置到旋转轴的距离。

>  在二维平面上旋转时，惯性矩和惯性张量等价，因为只有一个惯性矩就可以描述物体的旋转特性。


#### 3. 惯性积（Product of Inertia）
**惯性积**（Product of Inertia）是惯性张量中的非对角线元素，用于描述物体质量分布在不同轴之间的耦合关系。惯性积反映了物体在旋转时，由于质量分布不均匀，**在一个坐标轴上旋转会引起其他轴的耦合效应**。惯性积广泛应用于三维物体动力学计算和稳定性分析中。

对于一个质量分布已知的刚体，惯性积定义为：
$$
I_{ij} = - \int_V x_i x_j \, dm
$$
其中：

- $x_i$ 和 $x_j$​ 是刚体内质点相对于 i 轴和 j 轴的坐标，
- $I_{ij}$ 是惯性积，它在惯性张量中位于第 i 行第 j 列和第 j 行第 iii 列。

**性质：**
- **对称性**：惯性张量是对称矩阵，因此 $I_{ij} = I_{ji}$ 。
- **坐标依赖性**：惯性积依赖于物体的旋转轴的选择。在某些特定坐标系下（例如主轴系），惯性积可以变为零，使惯性张量对角化。对称物体的惯性积通常为零，意味着对称物体在一个轴上的旋转不会对其他轴产生影响。
