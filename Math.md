

# 矩阵

## 正定矩阵

如果一个对称矩阵 $\mathbf{M}$ 是正定的，那么对于任何非零向量 $\mathbf{x}$，以下二次型（Quadratic Form）结果永远大于零：
$$\mathbf{x}^\top \mathbf{M} \mathbf{x} > 0$$
- **几何意义**：这意味着如果你用这个矩阵 $\mathbf{M}$ 去变换一个向量 $\mathbf{x}$，变换后的向量 $\mathbf{M}\mathbf{x}$ 与原向量 $\mathbf{x}$ 之间的夹角永远小于 **90°**（即它们的点积为正）。
- **类比**：在标量运算中，$ax^2 > 0$ 只要 $a > 0$ 就成立。正定矩阵 $\mathbf{M}$ 就扮演了那个“正系数 $a$”的角色。

***（2）判别标准***
一个对称矩阵 $\mathbf{M}$ 要想被称为正定矩阵，必须满足以下任一等价条件：
1. **特征值（Eigenvalues）全为正**：这是最常用的判断方法。
2. **所有顺序主子式均大于零**：即从左上角开始缩小的所有子矩阵的行列式都必须是正数。
3. **存在 Cholesky 分解**：利用矩阵分解原理， 任何正定矩阵 $J$ 都可以唯一分解为 $J = LL^\top$ 。 其中 $L$ 是一个对角线元素为正的上三角矩阵。

***（3）作用***
*A. 动能永远为正*
机器人的总动能公式为 $E_k = \frac{1}{2} \dot{\mathbf{q}}^\top \mathbf{M}(\mathbf{q}) \dot{\mathbf{q}}$。 由于动能在物体运动时必须大于 0，因此**质量矩阵（Mass Matrix）$\mathbf{M}(\mathbf{q})$ 必须是正定的**。如果它不是正定的，物理引擎就会算出“负动能”，导致系统爆炸。

*B. 系统稳定性*
在控制理论中，李雅普诺夫（Lyapunov）稳定性分析经常使用正定矩阵来构造“能量函数”。如果能量函数的导数是负定的，说明系统能量在衰减，机器人最终会趋于稳定平衡点。

## 正交矩阵
**正交矩阵（Orthogonal Matrix）** 是最“完美”的矩阵之一。它代表了一种**只改变方向、不改变长度**的变换（如旋转或镜像）。

如果一个方阵 $\mathbf{Q}$ 满足以下条件，它就是正交矩阵：
$$\mathbf{Q}^\top \mathbf{Q} = \mathbf{Q} \mathbf{Q}^\top = \mathbf{I}$$
（其中 $\mathbf{I}$ 是单位矩阵）
这个公式隐藏了两个极其重要的特性：
1. **转置等于逆**：$\mathbf{Q}^{-1} = \mathbf{Q}^\top$。在实时计算中，求逆非常耗时，但转置只需瞬间完成。
2. **列向量特征**：正交矩阵的每一列都是**单位向量**，且两两相互**垂直（正交）**。


*（1）应用*
人形机器人的每一个关节坐标系相对于基座坐标系的姿态，都是用一个 $3 \times 3$ 的正交矩阵 $\mathbf{R}$ 来表示的。

- 当你需要把足端受到的力从“足端坐标系”转换回“身体坐标系”时，只需使用 $\mathbf{R}^\top$ 即可，计算速度极快且不会引入数值误差。


## 转置
在矩阵运算中，**转置（Transpose）** 是最基础的操作之一，符号通常记为 $\mathbf{A}^\top$ 或 $\mathbf{A}^T$。它的操作非常直观：**将矩阵的行（Row）变成列（Column），或者说绕着主对角线进行翻转。**

若矩阵 $\mathbf{A}$ 的元素为 $a_{ij}$，则其转置矩阵 $\mathbf{A}^\top$ 的元素为 $a_{ji}$。
- **维度变化**：一个 $m \times n$ 的矩阵转置后变为 $n \times m$。
- **对称性基础**：如果一个矩阵满足 $\mathbf{A} = \mathbf{A}^\top$，它就是**对称矩阵**

***作用***  

*A. 计算向量的点积（内积）*
在数学中，两个列向量 $\mathbf{u}$ 和 $\mathbf{v}$ 的点积通常表示为：
$$\mathbf{u} \cdot \mathbf{v} = \mathbf{u}^\top \mathbf{v}$$
这是计算**能量、功、投影**的基础。

*B. 坐标系变换（旋转矩阵）*
在人形机器人中，描述关节旋转的**旋转矩阵 $\mathbf{R}$** 有一个非常神奇的特性（它是正交矩阵）：

$$\mathbf{R}^{-1} = \mathbf{R}^\top$$

这意味着：**如果你想求旋转的逆过程（往回转），你不需要进行复杂的矩阵求逆计算，只需要把旋转矩阵转置一下即可。** 这大大提升了机器人实时控制的计算效率。

 *C. 构造对称正定矩阵（Cholesky 相关）*

利用了转置来构造对称性，任意矩阵乘以它的转置（$\mathbf{A}\mathbf{A}^\top$ 或 $\mathbf{A}^\top\mathbf{A}$）得到的结果必然是**对称**的，且通常是**半正定**的。这是保证物理仿真不崩溃的数学保险。


 *D. 物理桥梁：连接不同空间（如笛卡尔空间与关节空间）的力和运动*
在静力学中，有一个著名的公式：
$$\boldsymbol{\tau} = \mathbf{J}^\top \mathbf{F}$$
- $\mathbf{J}$ 是雅可比矩阵（描述速度关系）。
- $\mathbf{F}$ 是足端受到的外力。
- $\mathbf{J}^\top$（雅可比矩阵的转置）的作用是将**末端受到的力**转换回**各个关节需要的力矩**。这是人形机器人维持平衡、支撑体重的核心计算公式。